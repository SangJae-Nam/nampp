
* cast-exp
% =========================================================
% cast-exp  test - Normal case
interface tree
	method int sum()
	method bool equal(t : tree)

class interior-node extends object implements tree
	field tree left
	field tree right

	method void initialize(l : tree, r : tree)
		begin
			set left = l;
			set right = r
		end

	method tree getleft () left
	method tree getright() right
	method int sum()
		+(send left sum(), send right sum())
	method bool equal(t : tree) zero?(1)
%		if instanceof t interior-node
%			then if send left equal(send cast t interior-node getleft())
%				then send right equal(send cast t interior-node getright())
%				else zero?(1)
%			else zero?(1)


% =========================================================
% cast-exp  test - error case
interface tree
	method int sum()
	method bool equal(t : tree)

class interior-node extends object implements tree
	field tree left
	field tree right

	method void initialize(l : tree, r : tree)
		begin
			set left = l;
			set right = r
		end

	method tree getleft () left
	method tree getright() right
	method int sum()
		+(send left sum(), send right sum())
	method bool equal(t : tree) zero?(1)
%		if instanceof t interior-node
%			then if send left equal(send cast interior-node getleft())
%				then send right equal(send cast interior-node getright())
%				else zero?(1)
%			else zero?(1)

-> type t가 명시 되어있지 않다.
% =========================================================
% cast-exp  test - error case2
interface tree
	method int sum()
	method bool equal(t : tree)

class interior-node extends object implements tree
	field tree left
	field tree right

	method void initialize(l : tree, r : tree)
		begin
			set left = l;
			set right = r
		end

	method tree getleft () left
	method tree getright() right
	method int sum()
		+(send left sum(), send right sum())
	method bool equal(t : tree) zero?(1)
%		if instanceof t interior-node
%			then if send left equal(send cast t getleft())
%				then send right equal(send cast t getright())
%				else zero?(1)
%			else zero?(1)

-> interior-node를 명시하지않아 어느 노드의 왼쪽,오른쪽을 cast해야할지 알 수없다.
% =========================================================
% cast-exp  test - error case3
interface tree
	method int sum()
	method bool equal(int : tree)

class interior-node extends object implements tree
	field tree left
	field tree right

	method void initialize(l : tree, r : tree)
		begin
			set left = l;
			set right = r
		end

	method tree getleft () left
	method tree getright() right
	method int sum()
		+(send left sum(), send right sum())
	method bool equal(int : tree) zero?(1)
%		if instanceof int interior-node
%			then if send left equal(send cast int interior-node getleft())
%				then send right equal(send cast int interior-node getright())
%				else zero?(1)
%			else zero?(1)

-> type 오류발생 


